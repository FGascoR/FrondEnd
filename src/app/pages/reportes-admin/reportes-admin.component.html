<div class="container mt-4">
  <h4 class="mb-3">Reportes (Reservas Completadas y Préstamos Devueltos)</h4>

  <div class="row g-3 mb-3" [formGroup]="filterForm">
    <div class="col-md-4">
      <label class="form-label">Cliente</label>
      <input type="text" class="form-control" formControlName="clienteNombre" placeholder="Nombre o Apellido...">
    </div>
    <div class="col-md-4">
      <label class="form-label">Libro</label>
      <input type="text" class="form-control" formControlName="ejemplarInfo" placeholder="Título...">
    </div>
    <div class="col-md-4">
      <label class="form-label">Fecha de Inicio (Reserva/Préstamo)</label>
      <input type="date" class="form-control" formControlName="fechaInicio">
    </div>
  </div>

  <table class="table table-striped table-hover mt-3">
    <thead class="table-secondary">
      <tr>
        <th>Tipo</th> <th>Cliente</th>
        <th>Libro</th>
        <th>Fecha Inicio</th>
        <th>Fecha Fin</th>
        <th>Estado Final</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let reporte of reportes">
        <td>
          <span class="badge" [ngClass]="{
            'bg-info text-dark': reporte.tipo === 'Reserva', 
            'bg-secondary': reporte.tipo === 'Préstamo'
          }">
            {{ reporte.tipo }}
          </span>
        </td>
        <td>{{ reporte.clienteNombre }}</td>
        <td>{{ reporte.libroTitulo }}</td>
        <td>{{ reporte.fechaInicio | date: 'dd/MM/yyyy' }}</td>
        <td>{{ reporte.fechaFin | date: 'dd/MM/yyyy' }}</td>
        <td>
          <span class="badge bg-success">
            {{ reporte.estadoFinal }}
          </span>
        </td>
      </tr>
      
      <tr *ngIf="isLoading">
        <td colspan="6" class="text-center">Cargando reportes...</td>
      </tr>
      <tr *ngIf="!isLoading && reportes.length === 0">
        <td colspan="6" class="text-center">No hay reportes para mostrar.</td>
      </tr>
    </tbody>
  </table>

</div>